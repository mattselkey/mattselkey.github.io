---
id: 33
title: Configuring 2FA for Github with Microsoft Visual Studio Code Integration
date: 2018-12-16T10:29:25+01:00
github_comments_issueid: "1"
author: mattselkey
layout: post
guid: https://mattselkey.com/?p=33
permalink: /configuring-2fa-for-github-microsoft-visual-code-integration/
categories:
  - Github
tags:
  - 2FA
  - github
  - PowerShell
  - VisualStudioCode
---
<p style="text-align: justify;">If not already, at a bare minimum, you should be using 2FA (Two Factor Authentication) with all the things.</p><p style="text-align: justify;">Setting up Github with 2FA using Google authenticator is simple and documented online, however setting up 2FA with Microsoft Visual Studio Code is not as straight forward.</p><p style="text-align: justify;">This post details how I set up my environment to accomplish this task.</p><h3><strong>Prerequisites</strong></h3><ul><li style="text-align: justify;">A Github account</li><li style="text-align: justify;">A Mobile Phone with Google Authenticator installed, see the link <a href="https://support.google.com/accounts/answer/1066447?co=GENIE.Platform%3DAndroid&amp;hl=en" target="_blank" rel="noopener">here</a> (or search in Android/IOS app store if the link is no longer valid)</li></ul><h3 style="text-align: left;"><strong>Assumptions</strong></h3><ul><li style="text-align: justify;">Microsoft Visual Studio Code is installed</li><li>Git for Windows is installed<ul><li style="text-align: justify;">Visual Studio Code has been set as Git's default editor</li><li style="text-align: justify;">All other install options are set to the defaults</li></ul></li></ul><h3><strong>1. Setting up Github 2FA</strong></h3><p>Logon to Github and go to '<strong>Settings</strong>'</p><p style="padding-left: 30px;"><img class=" size-full wp-image-36 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-16_26_47-Releases-·-greenshot_greenshot.png" alt="2018-11-25 16_26_47-Releases · greenshot_greenshot" width="217" height="344" /></p><p>Go to '<strong>Security</strong>' and then click on '<strong>Enable two-factor authentication'</strong></p><p><img class=" size-full wp-image-37 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_08_59-Security.png" alt="2018-11-25 17_08_59-Security" width="1034" height="331" /></p><p>Next choose '<strong>Set up using an app</strong>'</p><p><img class=" size-full wp-image-38 alignright" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_11_03-Enable-two-factor-authentication.png" alt="2018-11-25 17_11_03-Enable two-factor authentication" width="930" height="590" /></p><p style="text-align: justify;">On the next screen, take a copy of the recovery codes provided. Personally I like to use a password keeper to store these, links to <a href="https://www.lastpass.com/" target="_blank" rel="noopener">Lastpass</a>, <a href="https://1password.com/" target="_blank" rel="noopener">1Password</a> and <a href="https://keepersecurity.com/en_GB/" target="_blank" rel="noopener">Keeper</a> are provided at the bottom of the page if you wish to install and use one of these (see sreenshot below). Once done, click '<strong>Next</strong>'.</p><p style="text-align: justify;"><img class=" size-full wp-image-43 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_13_02-Enable-two-factor-authentication2.png" alt="2018-11-25 17_13_02-Enable two-factor authentication2" width="618" height="736" /></p><p>On your phone, open up Google Authenticator and scan the QR code provided on the next page. In the Authenticator app, find the new entry for Github and enter the six digit Verification code into the text field and then click on '<strong>Enable</strong>'</p><p><img class=" size-full wp-image-44 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_14_52-Enable-two-factor-authentication.png" alt="2018-11-25 17_14_52-Enable two-factor authentication" width="611" height="590" /></p><p style="text-align: left;">2FA is now successfully enabled, you should be prompted as shown below:</p><p><img class=" size-full wp-image-46 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_39_35-Manage-two-factor-authentication-1.png" alt="2018-11-25 17_39_35-Manage two-factor authentication" width="1165" height="84" /></p><p>The next time you logon to Github you will be requested to enter a 6 digit Verification code from the Google Authenticator app.</p><h3><strong>2. Create a Personal access token</strong></h3><p>To access your account from within Visual Studio Code you will first need to create a personal access token.</p><p>On Github, go to '<strong>Developer settings</strong>' &gt; '<strong>Personal access tokens</strong>' &gt; '<strong>Generate new token</strong>', as shown below:</p><p><img class=" size-full wp-image-48 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_55_53-Personal-Access-Tokens.png" alt="2018-11-25 17_55_53-Personal Access Tokens" width="1042" height="226" /></p><p>Enter a description for your new token in the '<strong>Token description</strong>' text field and then select the scope as needed, for <strong>repo</strong> work the scope defined in the screenshot below with suffice.</p><p><img class=" size-full wp-image-49 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-17_58_43-New-personal-access-token.png" alt="2018-11-25 17_58_43-New personal access token" width="1021" height="555" /></p><p>Finally click on '<strong>Generate token</strong>'</p><p><img class=" size-full wp-image-50 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-18_10_48-New-personal-access-token.png" alt="2018-11-25 18_10_48-New personal access token.png" width="654" height="124" /></p><p>Copy the new access token and save it to your preferred password  keeper.</p><h3><img class=" size-full wp-image-52 alignnone" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-18_12_02-Personal-Access-Tokens.png" alt="2018-11-25 18_12_02-Personal Access Tokens" width="1058" height="262" /> <strong>3. Configure Git</strong></h3><p>Ensuring Git for windows is installed then within the Visual Studio Code integrated console run the following command:</p><p>[cc lang="bash"]git config --global credential.helper wincred[/cc]</p><p>As shown in the example below:</p><p><img class="alignnone size-full wp-image-86 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/12/2018-12-16-11_23_40-LoggingModule.psm1-Untitled-Workspace-Visual-Studio-Code.png" alt="2018-12-16 11_23_40-LoggingModule.psm1 - Untitled (Workspace) - Visual Studio Code" width="479" height="86" /></p><p>The next time a commit is pushed to GitHub from a local repo, you will be prompted to enter your GitHub login details, as shwon below, u<strong>se the personal access token as your password</strong>  </p><p><img class=" size-full wp-image-67 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-22_30_50-Window.png" alt="2018-11-25 22_30_50-Window.png" width="426" height="432" /></p><p>Git should now be configured with your GitHub account.</p><p>Should you need to confirm the credentials on your windows workstation, open the Credential Manager using the following command.</p><p>[cc lang="dos"]control /name Microsoft.CredentialManager[/cc]</p><p><img class=" size-full wp-image-68 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-22_56_46-Window.png" alt="2018-11-25 22_56_46-Window" width="417" height="214" /></p><p style="text-align: left;">Under '<strong>Generic Credentials</strong>' in the Windows Credentials tab you can view and remove your access token if needed.</p><p><img class=" size-full wp-image-69 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-23_00_03-Window.png" alt="2018-11-25 23_00_03-Window" width="647" height="169" /> <img class=" size-full wp-image-70 aligncenter" src="https://mattselkey.com/wp-content/uploads/2018/11/2018-11-25-23_01_17-Window.png" alt="2018-11-25 23_01_17-Window" width="704" height="377" /></p><!-- wp:paragraph --><!-- /wp:paragraph -->